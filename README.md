# Veles
A song lyrics markup language, parser, and renderer. Name taken from the Slavic god.

## Running
`$ luajit veles /path/to/lyrics/artist - album - title.txt`

Example:
```
$ luajit veles examples/Nothingface\ -\ An\ Audio\ Guide\ to\ Everyday\ Atrocity\ -\ The\ Sick.txt
Scratch the tears in for good...
Feels good...
Life can't hurt on tv...
Godspeed...
Lucky now...
When he grabs your hand, do you lick again?
But the taste has changed, flesh remains.

See what you go through...
Got what you came for...
When hate is blind...


You told me not to lie!


You told me not to lie!


You told me not to lie!

You told me not to lie!
Anger persists to drown...
Loathes you...
Say your knife just won't kill...
Try hard...
Want it now...
When the taste has changed, do you rest your face?
No eyes will close, the hole grows.


The start of new days...
Has nothing changed...
The sick knows no pain...


The start of new days...
Has nothing changed...
The sick knows no pain...


The start of new days...
Has nothing changed...
The sick knows no pain...


The start of new days...
Has nothing changed...
The sick knows no pain...


The start of new days...
Has nothing changed...
The sick knows no pain...


The start of new days...
Has nothing changed...
The sick knows no pain...


The start of new days...
Has nothing changed...
The sick knows no pain...


The start of new days...
Has nothing changed...
The sick knows no pain...

The start of new days...
The sick knows no pain...

```

## Design
- Sections can be denoted with `[]`, for example `[Refrain]`.
- Sections can be accessed via a variable, for example `<Refrain>`.
- Repeated amounts can be placed inside a `[]` or `<>`, for example `[Refrain x4]`.
  + Repeated amounts do not carry over, they are a one time thing. So you can do:
    * `[Refrain x4]`
    * `<Refrain x8>`
- Comments can be placed with `--Comment--`.
- Timestamps can be put in place for sections or individual lines with the format `#-HH:MM:SS-#`.
- Sync with the music player (or parse the song?) to find incorrect timestamps for the songs.
- Verses don't need any section declaration since they usually aren't repeated.
- Check for missing grammar and punctuation in the lyrics.

## TODO
- Parse the lyrics [WIP]
  + Extract sections [DONE]
  + Extract repeat counts [DONE]
  + Extract and optionally display comments [TODO]
  + Expand variables to define sections [TODO -- currently variables are ignored]
- Render the parsed lyrics [WIP]
  + Fix the newline spacing [WIP]

Also have the latest `rg` of TODOs in the script:
```
$ rg "\-\- TODO: " veles -r ""
49:Fix newline spacing between sections, currently it sometimes does double newlines.
50:Find variables (e.g. `<Chorus>`) and expand them into the defined sections, currently they are just ignored.
81:            I need better logic for determining whether or not to print the line, because currently it will sometimes duplicate lines or print reduntant empty lines.
```
